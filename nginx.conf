worker_processes auto;
pid /tmp/nginx.pid;

events {
  worker_connections 1024;
  use epoll;
  multi_accept on;
}

http {
  # this is necessary for us to be able to disable request buffering in all cases

  include       /etc/nginx/mime.types;
  default_type  application/octet-stream;
  keepalive_timeout  65;

  log_format timed_combined '$status - $body_bytes_sent - "$request"'
    '"$http_referer"'
    '$request_time $upstream_response_time $pipe';

  access_log /dev/stdout timed_combined;

  server {

    listen 80;
    server_tokens off;

    root /usr/share/nginx/html;

    # disable any limits to avoid HTTP 413 for large image uploads
    client_max_body_size 0;

    # required to avoid HTTP 411:
    chunked_transfer_encoding on;

    location / {
      # This will allow you to refresh page in your angular app. Which will not give error 404.
      try_files $uri$args $uri$args/ /index.html;
    }
  }
}
